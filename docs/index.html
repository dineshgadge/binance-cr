<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.28.0">


<link href="css/style.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="js/doc.js"></script>
<script type="text/javascript">
  CrystalDoc.base_path = "";
</script>

  <meta id="repository-name" content="github.com/mwlang/binance">
  <title>README - github.com/mwlang/binance</title>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="repository-links">
      <a href="index.html">README</a>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="github.com/mwlang/binance/Binance" data-name="binance">
      <a href="Binance.html">Binance</a>
      
        <ul>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Converters" data-name="binance::converters">
      <a href="Binance/Converters.html">Converters</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Endpoints" data-name="binance::endpoints">
      <a href="Binance/Endpoints.html">Endpoints</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/HttpMethods" data-name="binance::httpmethods">
      <a href="Binance/HttpMethods.html">HttpMethods</a>
      
    </li>
  
  <li class="parent " data-id="github.com/mwlang/binance/Binance/Responses" data-name="binance::responses">
      <a href="Binance/Responses.html">Responses</a>
      
        <ul>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/AccountResponse" data-name="binance::responses::accountresponse">
      <a href="Binance/Responses/AccountResponse.html">AccountResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/AggTradeEntry" data-name="binance::responses::aggtradeentry">
      <a href="Binance/Responses/AggTradeEntry.html">AggTradeEntry</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/AggTradesResponse" data-name="binance::responses::aggtradesresponse">
      <a href="Binance/Responses/AggTradesResponse.html">AggTradesResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/AvgPriceResponse" data-name="binance::responses::avgpriceresponse">
      <a href="Binance/Responses/AvgPriceResponse.html">AvgPriceResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/BalanceEntry" data-name="binance::responses::balanceentry">
      <a href="Binance/Responses/BalanceEntry.html">BalanceEntry</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/BookTickerEntry" data-name="binance::responses::booktickerentry">
      <a href="Binance/Responses/BookTickerEntry.html">BookTickerEntry</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/BookTickerResponse" data-name="binance::responses::booktickerresponse">
      <a href="Binance/Responses/BookTickerResponse.html">BookTickerResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/DepthEntry" data-name="binance::responses::depthentry">
      <a href="Binance/Responses/DepthEntry.html">DepthEntry</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/DepthResponse" data-name="binance::responses::depthresponse">
      <a href="Binance/Responses/DepthResponse.html">DepthResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/ExchangeFilter" data-name="binance::responses::exchangefilter">
      <a href="Binance/Responses/ExchangeFilter.html">ExchangeFilter</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/ExchangeInfoResponse" data-name="binance::responses::exchangeinforesponse">
      <a href="Binance/Responses/ExchangeInfoResponse.html">ExchangeInfoResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/ExchangeSymbol" data-name="binance::responses::exchangesymbol">
      <a href="Binance/Responses/ExchangeSymbol.html">ExchangeSymbol</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/IcebergPartsFilter" data-name="binance::responses::icebergpartsfilter">
      <a href="Binance/Responses/IcebergPartsFilter.html">IcebergPartsFilter</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/Kline" data-name="binance::responses::kline">
      <a href="Binance/Responses/Kline.html">Kline</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/KlinesResponse" data-name="binance::responses::klinesresponse">
      <a href="Binance/Responses/KlinesResponse.html">KlinesResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/LotSizeFilter" data-name="binance::responses::lotsizefilter">
      <a href="Binance/Responses/LotSizeFilter.html">LotSizeFilter</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/MarketLotSizeFilter" data-name="binance::responses::marketlotsizefilter">
      <a href="Binance/Responses/MarketLotSizeFilter.html">MarketLotSizeFilter</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/MaxNumAlgoOrdersFilter" data-name="binance::responses::maxnumalgoordersfilter">
      <a href="Binance/Responses/MaxNumAlgoOrdersFilter.html">MaxNumAlgoOrdersFilter</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/MinNotionalFilter" data-name="binance::responses::minnotionalfilter">
      <a href="Binance/Responses/MinNotionalFilter.html">MinNotionalFilter</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/MyTradeEntry" data-name="binance::responses::mytradeentry">
      <a href="Binance/Responses/MyTradeEntry.html">MyTradeEntry</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/MyTradesResponse" data-name="binance::responses::mytradesresponse">
      <a href="Binance/Responses/MyTradesResponse.html">MyTradesResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/Order" data-name="binance::responses::order">
      <a href="Binance/Responses/Order.html">Order</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/OrderFill" data-name="binance::responses::orderfill">
      <a href="Binance/Responses/OrderFill.html">OrderFill</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/OrderResponse" data-name="binance::responses::orderresponse">
      <a href="Binance/Responses/OrderResponse.html">OrderResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/PercentPriceFilter" data-name="binance::responses::percentpricefilter">
      <a href="Binance/Responses/PercentPriceFilter.html">PercentPriceFilter</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/PingResponse" data-name="binance::responses::pingresponse">
      <a href="Binance/Responses/PingResponse.html">PingResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/PriceEntry" data-name="binance::responses::priceentry">
      <a href="Binance/Responses/PriceEntry.html">PriceEntry</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/PriceFilter" data-name="binance::responses::pricefilter">
      <a href="Binance/Responses/PriceFilter.html">PriceFilter</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/PriceResponse" data-name="binance::responses::priceresponse">
      <a href="Binance/Responses/PriceResponse.html">PriceResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/RateLimit" data-name="binance::responses::ratelimit">
      <a href="Binance/Responses/RateLimit.html">RateLimit</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/ServerResponse" data-name="binance::responses::serverresponse">
      <a href="Binance/Responses/ServerResponse.html">ServerResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/TimeResponse" data-name="binance::responses::timeresponse">
      <a href="Binance/Responses/TimeResponse.html">TimeResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/TradeEntry" data-name="binance::responses::tradeentry">
      <a href="Binance/Responses/TradeEntry.html">TradeEntry</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/TradesResponse" data-name="binance::responses::tradesresponse">
      <a href="Binance/Responses/TradesResponse.html">TradesResponse</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/TwentyFourHourEntry" data-name="binance::responses::twentyfourhourentry">
      <a href="Binance/Responses/TwentyFourHourEntry.html">TwentyFourHourEntry</a>
      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/Responses/TwentyFourHourResponse" data-name="binance::responses::twentyfourhourresponse">
      <a href="Binance/Responses/TwentyFourHourResponse.html">TwentyFourHourResponse</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/mwlang/binance/Binance/REST" data-name="binance::rest">
      <a href="Binance/REST.html">REST</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1>Binance</h1>

<p>This is an unofficial Crystal wrapper for the Binance exchange REST and WebSocket APIs.</p>

<ul><li><a href="https://mwlang.github.io/binance/" target="_blank">Source Documentation</a></li><li><a href="https://github.com/mwlang/binance/tree/master/examples" target="_blank">Examples</a></li><li><a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md" target="_blank">Official Binance API Documentation</a></li></ul>

<h2>Features</h2>

<p>Current</p>

<ul><li>Basic implementation of REST API</li><li>Easy to use authentication</li><li>Methods return <code><a href="Binance/Responses/ServerResponse.html">Binance::Responses::ServerResponse</a></code> objects with JSON already deserialized</li><li>No need to generate signatures</li></ul></ul>

<p>Coming Soon!</p>

<ul><li>Basic implementation of WebSocket API</li><li>Pass procs or lambdas to event handlers</li><li>Single and multiple streams supported</li></ul></ul>

<h2>REST Endpoints</h2>

<h3>PUBLIC (NONE)</h3>

<ul><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#test-connectivity" target="_blank">ping</a> Test connectivity to the Rest API.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#check-server-time" target="_blank">time</a> Test connectivity to the Rest API and get the current server time.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#exchange-information" target="_blank">exchangeInfo</a> Current exchange trading rules and symbol information</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#order-book" target="_blank">depth (order book)</a> Get Order book depth info.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#recent-trades-list" target="_blank">trades</a> Get recent trades (up to last 500).</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#compressedaggregate-trades-list" target="_blank">aggTrades</a> Get compressed, aggregate trades.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#klinecandlestick-data" target="_blank">klines</a> Kline/candlestick bars for a symbol. Klines are uniquely identified by their open time.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#current-average-price" target="_blank">avgPrice</a> Current average price for a symbol.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#24hr-ticker-price-change-statistics" target="_blank">ticker/24hr</a> 24 hour rolling window price change statistics.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#symbol-price-ticker" target="_blank">ticker/price</a> Latest price for a symbol or symbols.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#symbol-order-book-ticker" target="_blank">ticker/bookTicker</a> Best price/qty on the order book for a symbol or symbols.</li></ul>

<h3>MARKET_DATA (API_KEY required)</h3>

<ul><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#old-trade-lookup-market_data" target="_blank">historicalTrades</a> Get older trades.</li></ul>

<h3>SIGNED (API_KEY and signed with SECRET_KEY required)</h3>

<ul><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#account-information-user_data" target="_blank">account</a> Get current account information.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#query-order-user_data" target="_blank">GET order (query)</a> Check an order's status.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#current-open-orders-user_data" target="_blank">GET openOrders</a> Get all open orders on a symbol.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#all-orders-user_data" target="_blank">GET allOrders</a> Get all account orders; active, canceled, or filled.</li><li>[ ] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#new-order--trade" target="_blank">POST order (new order)</a> Send in a new order.</li><li>[ ] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#test-new-order-trade" target="_blank">POST order/test (test new order)</a> Creates and validates a new order but does not send it into the matching engine.</li><li>[ ] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#cancel-order-trade" target="_blank">DELETE order (cancel order)</a> Cancel an active order.</li><li>[x] <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#account-trade-list-user_data" target="_blank">myTrades</a> Get trades for a specific account and symbol.</li></ul>

<h2>Installation</h2>

<ol><li>Add the dependency to your <code>shard.yml</code>:</li></ol>

<pre><code class="language-yaml">dependencies:
  binance:
    github: mwlang/binance</code></pre>

<ol><li>Run <code>shards install</code></li></ol>

<h2>Getting Started</h2>

<h3>REST client</h3>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;binance&quot;</span>

client <span class="o">=</span> <span class="t">Binance</span><span class="t">::</span><span class="t">REST</span>.<span class="k">new</span>

puts client.ping.pong.inspect => <span class="n">true</span>

client.klines(symbol: <span class="s">&quot;BNBBTC&quot;</span>, interval: <span class="s">&quot;5m&quot;</span>, limit: <span class="n">5</span>).klines.each <span class="k">do</span> <span class="o">|</span>kline<span class="o">|</span>
  puts <span class="s">&quot;</span><span class="i">#{</span>kline.open_time<span class="i">}</span><span class="s"> O: </span><span class="i">#{</span><span class="s">&quot;%0.6f&quot;</span> <span class="o">%</span> kline.open_price<span class="i">}</span><span class="s"> C: </span><span class="i">#{</span><span class="s">&quot;%0.6f&quot;</span> <span class="o">%</span> kline.close_price<span class="i">}</span><span class="s">&quot;</span>
<span class="k">end</span>

<span class="c"># =&gt; </span>
<span class="c"># 2019-07-02 15:35:00 UTC O: 0.003031 C: 0.003035</span>
<span class="c"># 2019-07-02 15:40:00 UTC O: 0.003035 C: 0.003023</span>
<span class="c"># 2019-07-02 15:45:00 UTC O: 0.003023 C: 0.003031</span>
<span class="c"># 2019-07-02 15:50:00 UTC O: 0.003033 C: 0.003032</span>
<span class="c"># 2019-07-02 15:55:00 UTC O: 0.003032 C: 0.003010</span>

api_key <span class="o">=</span> <span class="s">&quot;vmPUZE6mv9SD5VNHk4HlWFsOr6aKE2zvsw0MuIgwCIPy6utIco14y7Ju91duEh8A&quot;</span>
api_secret <span class="o">=</span> <span class="s">&quot;NhqPtmdSJYdKjVHjA7PZj4Mge3R5YNiP1e3UZjInClVN65XAbvqqM6A7H5fATj0j&quot;</span>

signed_client <span class="o">=</span> <span class="t">Binance</span><span class="t">::</span><span class="t">REST</span>.<span class="k">new</span> api_key: api_key, secret_key: api_secret
signed_client.historical_trades(<span class="s">&quot;BTCUSDC&quot;</span>, <span class="n">5</span>).trades.each <span class="k">do</span> <span class="o">|</span>trade<span class="o">|</span>
  puts <span class="s">&quot;</span><span class="i">#{</span>trade.time<span class="i">}</span><span class="s"> </span><span class="i">#{</span><span class="s">&quot;%0.6f&quot;</span> <span class="o">%</span> trade.price<span class="i">}</span><span class="s"> </span><span class="i">#{</span><span class="s">&quot;%0.6f&quot;</span> <span class="o">%</span> trade.quantity<span class="i">}</span><span class="s">&quot;</span>
<span class="k">end</span>

<span class="c"># =&gt; </span>
<span class="c"># 2019-07-02 16:08:07 UTC 10465.560000 0.001689</span>
<span class="c"># 2019-07-02 16:08:09 UTC 10465.650000 1.000000</span>
<span class="c"># 2019-07-02 16:08:09 UTC 10465.650000 0.034570</span>
<span class="c"># 2019-07-02 16:08:09 UTC 10465.650000 0.017813</span>
<span class="c"># 2019-07-02 16:08:09 UTC 10471.390000 0.049130</span></code></pre>

<p>Initializing the REST client:</p>

<p>If you only plan on touching public API endpoints, you can forgo any arguments.  
Any of the public (NONE) api endpoints will work without an API key.</p>

<pre><code class="language-crystal">client <span class="o">=</span> <span class="t">Binance</span><span class="t">::</span><span class="t">REST</span>.<span class="k">new</span></code></pre>

<p>Otherwise provide an api_key and secret_key as keyword arguments</p>

<pre><code class="language-crystal">client <span class="o">=</span> <span class="t">Binance</span><span class="t">::</span><span class="t">REST</span>.<span class="k">new</span> api_key: <span class="s">&quot;x&quot;</span>, secret_key: <span class="s">&quot;y&quot;</span></code></pre>

<h4>Anatomy of a <code><a href="Binance/Responses/ServerResponse.html">Binance::Responses::ServerResponse</a></code></h4>

<p>Every API endpoint call results in a ServerResponse that deserializes the JSON data retrieved from the server.</p>

<p>A ServerResponse is either a successful call and loaded with data or in an error state.  Exceptions
from connection fails or the server returning error codes are captured.  It is up to you to check
for errors before attempting to access the properties of the ServerResponses</p>

<p>When accessing the properties of the JSON responses, Generally speaking: </p>

<ul><li>camel-cased JSON keys become downcased and underscored.</li><li>abbreviations are spelled out (e.g. qty => quantity).</li><li>If an API can return one or more, it's always an Array property on the <code>ServerResponse</code> object.</li></ul></ul>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;binance&quot;</span>

client <span class="o">=</span> <span class="t">Binance</span><span class="t">::</span><span class="t">REST</span>.<span class="k">new</span>

puts client.ping.inspect

<span class="c"># =&gt; #&lt;Binance::Responses::PingResponse:0x10d40c280 </span>
<span class="c">#   @success=true, </span>
<span class="c">#   @error_code=nil, </span>
<span class="c">#   @error_message=nil, </span>
<span class="c">#   @response=#&lt;Cossack::Response:0x10d3fe5a0 @status=200, </span>
<span class="c">#     @headers=HTTP::Headers{</span>
<span class="c">#       &quot;Content-Type&quot; =&gt; &quot;application/json;charset=utf-8&quot;, </span>
<span class="c">#       &quot;Transfer-Encoding&quot; =&gt; &quot;chunked&quot;, </span>
<span class="c">#       &quot;Connection&quot; =&gt; &quot;keep-alive&quot;, </span>
<span class="c">#       &quot;Date&quot; =&gt; &quot;Tue, 02 Jul 2019 15:26:47 GMT&quot;, </span>
<span class="c">#       &quot;Server&quot; =&gt; &quot;nginx&quot;, </span>
<span class="c">#       &quot;Vary&quot; =&gt; &quot;Accept-Encoding&quot;, </span>
<span class="c">#       &quot;X-MBX-USED-WEIGHT&quot; =&gt; &quot;3&quot;, </span>
<span class="c">#       &quot;Strict-Transport-Security&quot; =&gt; </span>
<span class="c">#       &quot;max-age=31536000; includeSubdomains&quot;, </span>
<span class="c">#       &quot;X-Frame-Options&quot; =&gt; &quot;SAMEORIGIN&quot;, </span>
<span class="c">#       &quot;X-Xss-Protection&quot; =&gt; &quot;1; mode=block&quot;,</span>
<span class="c">#       &quot;X-Content-Type-Options&quot; =&gt; &quot;nosniff&quot;, </span>
<span class="c">#       &quot;Content-Security-Policy&quot; =&gt; &quot;default-src &#39;self&#39;&quot;, </span>
<span class="c">#       &quot;X-Content-Security-Policy&quot; =&gt; &quot;default-src &#39;self&#39;&quot;, </span>
<span class="c">#       &quot;X-WebKit-CSP&quot; =&gt; &quot;default-src &#39;self&#39;&quot;, </span>
<span class="c">#       &quot;Cache-Control&quot; =&gt; &quot;no-cache, no-store, must-revalidate&quot;, </span>
<span class="c">#       &quot;Pragma&quot; =&gt; &quot;no-cache&quot;, </span>
<span class="c">#       &quot;Expires&quot; =&gt; &quot;0&quot;, </span>
<span class="c">#       &quot;Content-Encoding&quot; =&gt; &quot;gzip&quot;, </span>
<span class="c">#       &quot;X-Cache&quot; =&gt; &quot;Miss from cloudfront&quot;, </span>
<span class="c">#       &quot;Via&quot; =&gt; &quot;1.1 f5d17f65245ed818b0a01bb46646051c.cloudfront.net (CloudFront)&quot;, </span>
<span class="c">#       &quot;X-Amz-Cf-Pop&quot; =&gt; &quot;ATL50-C1&quot;, </span>
<span class="c">#       &quot;X-Amz-Cf-Id&quot; =&gt; &quot;-lcrDlHfRIAYp7ULZLmEqNzDMCU8U4q5LnS60csCxtYe-SRY3qqqTQ==&quot;</span>
<span class="c">#       }, </span>
<span class="c">#     @body=&quot;{}&quot;&gt;, </span>
<span class="c">#   @exception=nil&gt;</span></code></pre>

<p>Each endpoint has it's own Response object derived from the ServerResponse object and, consequentially, the specific properties that are mapped to the JSON.  For example,
the <a href="https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md#check-server-time" target="_blank">time</a> endpoint returns a <code>TimeResponse</code> with one additional property value, the "serverTime", accessible as follows:</p>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;binance&quot;</span>

client <span class="o">=</span> <span class="t">Binance</span><span class="t">::</span><span class="t">REST</span>.<span class="k">new</span>

puts client.time.server_time.inspect

<span class="c"># =&gt; 2019-07-03 18:41:45.491000000 UTC</span></code></pre>

<h2>Testing</h2>

<p>Testing is done primarily with webmock and stubbing server responses.  To make testing
easier, a mini-<a href="https://github.com/vcr/vcr" target="_blank">VCR style record and playback</a> set of helpers
was implemented.  </p>

<p>However, only PUBLIC API VCR cassettes are committed to the repo.  To test SIGNED/VERIFIED
API calls, you'll have to setup your private API credentials.</p>

<h2>Development</h2>

<p>All API's are TDD and have specs.  If you find a bug or want to contribute, then your 
contributions is expected to have specs exercising your code changes.</p>

<p>API calls are captured with so-called VCR cassettes, which is a <a href="https://github.com/mwlang/binance/blob/master/spec/support/vcr.cr" target="_blank">small library</a> built upon Webmock for capturing and playing back a server interaction with one caveat:  signed APIs (those requiring API key) are not checked
into the repository.  As a consequence, you'll have to set up your API key and record your own
cassettes locally to get specs passing.  Signed exchanges are necessarily kept somewhat generic, but read the specs for prerequisites to actions you much take on Binance manually to prepare
to capture your signed cassettes. </p>

<p><span class="flag purple">NOTE</span>  Signed exchanges are saved to ./spec/fixtures/vcr_cassettes/signed and this folder is excluded in the .gitignore file.</p>

<p>To set up your API key for test environment, rename ./spec/test.yml.example to ./spec/test.yml
and replace values in the file with your own API key.  This file is likewise excluded via .gitignore.</p>

<p>From time to time, Binance silently releases changes to their API, adding new and undocumented fields.  For example, the <code></code><code>account</code><code></code> api presently returns a accountType with value "MARGIN",
but this field is not yet documented nor are the ENUM values known at this time.  When noticed,
these fields may be added and parsed without issue.</p>

<h2>Contributing</h2>

<p>Pull Requests welcomed.  Fully spec'd PR's are likely to get merged!</p>

<ol><li>Fork it (&lt;https://github.com/mwlang/binance/fork>)</li><li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li><li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li><li>Push to the branch (<code>git push origin my-new-feature</code>)</li><li>Create a new Pull Request</li></ol>

<h2>TODO</h2>

<p><span class="flag orange">TODO</span>  extend the VCR functionality to obsfucate SIGNED calls to avoid revealing api keys.</p>

<p><span class="flag orange">TODO</span>  build Websocket wrappers</p>

<h2>Contributors</h2>

<ul><li><a href="https://github.com/mwlang" target="_blank">mwlang</a> - creator and maintainer</li></ul>
</div>
</body>
</html>
